---
title: "tidybulk - part of tidyTranscriptomics"
output: github_document
---

<!-- badges: start -->
[![Lifecycle:maturing](https://img.shields.io/badge/lifecycle-maturing-blue.svg)](https://www.tidyverse.org/lifecycle/#maturing) 
<!-- badges: end -->

# HPCell

## Analysis automated pipeline

Flowchart

https://app.mural.co/t/covid7029/m/covid7029/1656652076667/c47e104697d76b36b8dee3bd05d8de9d96d99efd?sender=udbe1ea99c9618abb07196978

Clone the repository

```{bash}

git clone git@github.com:susansjy22/HPCell.git

```

Install Jascap/HPCell package 

```{r, eval=FALSE}

remote::install_github("git@github.com:susansjy22/HPCell.git")

```

load jascap package 

```{r}

library(jascap)

```

load input and reference data


```{r}
# Load input data (can be a list of directories or single directory)
library(Seurat)
library(scRNAseq)
file_path = tempfile() |> paste0(".rds")
HeOrganAtlasData(ensembl=FALSE,location=FALSE)[, 1:400] |> 
  as.Seurat(data = NULL) |> 
  saveRDS(file_path)
```

Execute Targets workflow and load results

```{r}

# Running the pipeline
preprocessed_seurat = run_targets_pipeline(
    input_data = file_path, 
    store = "~/HPCell/pipeline_store",
    tissue = "pbmc",
    computing_resources = crew_controller_local(workers = 1), 
    filter_input = TRUE, 
    RNA_assay_name = "originalexp"
)

# Load results
preprocessed_seurat

```
